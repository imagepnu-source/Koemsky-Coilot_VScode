import re

# Define the 20 activities that need restructuring
activities_to_restructure = {
    62: {
        "title": "그림 속 문제 찾기",
        "new_method": """놀이 방법 (7단계):
1. 준비: 모순된 장면이 담긴 그림 카드를 평평한 곳에 펼쳐 놓습니다.
2. 시범: 보호자가 먼저 한 그림을 보며 이상한 점을 찾아 설명합니다.
3. 기본: 아이에게 그림을 10초간 관찰하게 하고 이상한 점을 물어봅니다.
4. 반복: 아이가 발견한 부분에 표시하고 왜 이상한지 이유를 말하게 합니다.
5. 확장: 어떻게 고치면 좋을지 수정안을 함께 생각하고 말합니다.
6. 협응: 다른 그림으로 바꾸어 스스로 문제를 찾고 설명하게 합니다.
7. 마무리: 아이가 직접 이상한 그림을 그려보며 창의적 사고를 격려합니다."""
    },
    63: {
        "title": "블록으로 집 짓기 계획 세우기",
        "new_method": """놀이 방법 (7단계):
1. 준비: 다양한 크기의 블록을 넓은 바닥에 모아 놓고 종이와 펜을 준비합니다.
2. 시범: 보호자가 간단한 집 모양을 종이에 그리고 필요한 블록을 고릅니다.
3. 기본: 아이에게 어떤 집을 만들지 물어보고 종이에 그려보게 합니다.
4. 반복: 그림을 보며 필요한 블록을 함께 고르고 하나씩 쌓아 봅니다.
5. 확장: 계획과 다른 부분을 발견하면 왜 다른지 이야기하며 수정합니다.
6. 협응: 아이 스스로 계획 그림을 보고 블록을 배치하며 집을 완성합니다.
7. 마무리: 완성된 집과 계획 그림을 비교하며 성취감을 나눕니다."""
    },
    64: {
        "title": "반대말 몸으로 표현하기",
        "new_method": """놀이 방법 (7단계):
1. 준비: 넓은 공간을 확보하고 반대말 카드나 그림을 준비합니다.
2. 시범: 보호자가 '크다'와 '작다'를 몸으로 과장되게 표현합니다.
3. 기본: 아이에게 한 단어를 주고 몸으로 표현하도록 격려합니다.
4. 반복: 반대 단어를 제시하며 다시 몸으로 보여주고 차이를 확인합니다.
5. 확장: 빠르다-느리다, 무겁다-가볍다 등 다양한 반대말로 반복합니다.
6. 협응: 아이가 스스로 반대말을 제안하고 두 동작을 연속해 표현합니다.
7. 마무리: 가장 재미있었던 반대말을 함께 다시 표현하며 놀이를 마칩니다."""
    },
    65: {
        "title": "동화 속 등장인물이 되어보기",
        "new_method": """놀이 방법 (7단계):
1. 준비: 익숙한 동화책을 함께 읽고 등장인물 역할을 나눕니다.
2. 시범: 보호자가 한 등장인물의 말과 행동을 흉내 내며 보여줍니다.
3. 기본: 아이가 다른 등장인물이 되어 간단한 대사를 말하게 합니다.
4. 반복: 장면을 바꾸어 가며 여러 등장인물의 행동을 함께 연기합니다.
5. 확장: 동화에 없던 대사나 행동을 즉흥적으로 추가해 보게 합니다.
6. 협응: 아이와 보호자가 역할을 바꾸어 다시 연기하며 놀이합니다.
7. 마무리: 가장 재미있었던 장면을 선택해 다시 연기하며 마무리합니다."""
    },
    66: {
        "title": "여러 가지 표정 카드 짝짓기",
        "new_method": """놀이 방법 (7단계):
1. 준비: 다양한 감정 표정 카드 6~8장을 바닥에 펼쳐 놓습니다.
2. 시범: 보호자가 한 표정 카드를 들고 같은 표정을 직접 지어 봅니다.
3. 기본: 아이에게 한 표정 카드를 주고 따라서 표정을 지어보게 합니다.
4. 반복: 여러 표정 카드를 하나씩 골라 얼굴로 표현하며 감정을 말합니다.
5. 확장: 같은 감정의 카드끼리 짝지어 분류하고 이름을 붙여 봅니다.
6. 협응: 아이가 표정을 먼저 짓고 보호자가 맞는 카드를 찾게 합니다.
7. 마무리: 오늘 기분에 해당하는 표정 카드를 고르며 감정을 나눕니다."""
    },
    67: {
        "title": "같은 무늬 찾기 놀이",
        "new_method": """놀이 방법 (7단계):
1. 준비: 무늬가 있는 천, 종이, 옷감 조각 10여 개를 넓게 펼쳐 놓습니다.
2. 시범: 보호자가 줄무늬 두 개를 고르며 "이 둘은 모두 줄무늬야"라고 말합니다.
3. 기본: 아이에게 한 무늬를 보여주고 같은 무늬를 찾아보게 합니다.
4. 반복: 찾은 무늬를 모아 놓고 무늬 이름을 함께 말하며 분류합니다.
5. 확장: 물방울, 체크, 꽃무늬 등 다양한 무늬를 구별하며 탐색합니다.
6. 협응: 아이가 스스로 무늬를 선택하고 같은 것끼리 묶어 정리합니다.
7. 마무리: 집 안이나 옷에서 같은 무늬를 찾아보며 일상으로 확장합니다."""
    },
    68: {
        "title": "이야기 순서 카드 배열하기",
        "new_method": """놀이 방법 (7단계):
1. 준비: 간단한 이야기 순서 카드 3~4장을 섞어서 테이블에 놓습니다.
2. 시범: 보호자가 첫 장면 카드를 선택하며 "이게 처음이야"라고 설명합니다.
3. 기본: 아이에게 다음 장면 카드를 고르게 하고 왜 그런지 물어봅니다.
4. 반복: 나머지 카드를 순서대로 배치하며 이야기 흐름을 말로 표현합니다.
5. 확장: 카드 순서를 다시 섞어 혼자서 배열해 보고 이야기를 다시 말합니다.
6. 협응: 아이가 자신만의 이야기 순서를 만들고 그 이유를 설명하게 합니다.
7. 마무리: 완성된 이야기를 카드 없이 기억하며 다시 말해 보게 합니다."""
    },
    69: {
        "title": "미로 찾기 놀이",
        "new_method": """놀이 방법 (7단계):
1. 준비: 간단한 미로 그림을 인쇄하거나 그려서 크레용과 함께 준비합니다.
2. 시범: 보호자가 손가락으로 미로 길을 천천히 따라가며 방법을 보여줍니다.
3. 기본: 아이에게 미로 시작점을 가리키고 출구까지 손가락으로 가게 합니다.
4. 반복: 막힌 길을 만나면 뒤로 돌아가는 전략을 함께 연습합니다.
5. 확장: 크레용으로 길을 그리며 통과하고 다른 색으로 새 길을 찾아봅니다.
6. 협응: 난이도가 높은 미로로 바꾸어 스스로 해결하도록 격려합니다.
7. 마무리: 완성한 미로를 보며 성취감을 나누고 더 어려운 미로에 도전합니다."""
    },
    70: {
        "title": "큰 종이에 함께 그림 그리기",
        "new_method": """놀이 방법 (7단계):
1. 준비: 큰 전지나 포장지를 바닥에 펼치고 크레용을 여러 개 준비합니다.
2. 시범: 보호자가 먼저 한쪽에 해를 그리며 "나는 해를 그릴게"라고 말합니다.
3. 기본: 아이에게 무엇을 그리고 싶은지 묻고 자유롭게 그리게 합니다.
4. 반복: 서로의 그림을 보고 연결되는 그림을 추가로 그려 이야기를 만듭니다.
5. 확장: 그림에 등장하는 것들의 이름을 말하며 이야기를 구성합니다.
6. 협응: 함께 한 장면을 완성하며 협력하고 역할을 나누어 그립니다.
7. 마무리: 완성된 큰 그림을 벽에 붙이고 함께 감상하며 이야기를 나눕니다."""
    },
    81: {
        "title": "거울 보며 표정 따라 하기",
        "new_method": """놀이 방법 (7단계):
1. 준비: 큰 거울 앞에 아이와 나란히 앉아 얼굴이 잘 보이게 합니다.
2. 시범: 보호자가 웃는 표정을 짓고 거울을 보며 "웃는 얼굴이야"라고 말합니다.
3. 기본: 아이에게 같은 표정을 따라 짓게 하고 거울로 확인하게 합니다.
4. 반복: 다양한 표정을 하나씩 보여주고 아이가 따라 하며 비교합니다.
5. 확장: 아이가 먼저 표정을 짓고 보호자가 따라 하며 역할을 바꿉니다.
6. 협응: 감정 이름을 말하면 아이가 거울 보며 그 표정을 만들게 합니다.
7. 마무리: 오늘의 기분에 맞는 표정을 함께 지으며 감정을 나눕니다."""
    },
    82: {
        "title": "구멍 뚫린 종이에 끈 꿰기",
        "new_method": """놀이 방법 (7단계):
1. 준비: 구멍이 뚫린 카드와 끝이 뭉툭한 끈을 테이블에 놓습니다.
2. 시범: 보호자가 끈 끝을 한 구멍에 천천히 넣고 반대쪽에서 빼냅니다.
3. 기본: 아이에게 끈을 주고 첫 구멍에 넣어보게 하며 손을 잡아줍니다.
4. 반복: 다음 구멍으로 이어가며 끈을 꿰는 동작을 여러 번 연습합니다.
5. 확장: 카드에 그려진 선을 따라 순서대로 구멍을 연결하게 합니다.
6. 협응: 혼자서 끈의 시작과 끝을 조절하며 전체를 완성하게 합니다.
7. 마무리: 완성된 끈 작품을 함께 보며 칭찬하고 전시하거나 보관합니다."""
    },
    83: {
        "title": "바닥에 선 따라 걷기",
        "new_method": """놀이 방법 (7단계):
1. 준비: 바닥에 색 테이프로 직선, 곡선, 지그재그 선을 여러 개 붙입니다.
2. 시범: 보호자가 한 발씩 선 위를 천천히 밟으며 걷는 모습을 보여줍니다.
3. 기본: 아이 손을 잡고 함께 선을 따라 걸으며 균형을 잡게 합니다.
4. 반복: 손을 놓고 아이 혼자 선을 따라 걸으며 양팔로 균형을 잡습니다.
5. 확장: 곡선이나 지그재그 선으로 바꾸어 다양한 방향으로 걸어 봅니다.
6. 협응: 선 위에서 멈추기, 뒤로 걷기 등 동작을 추가하며 도전합니다.
7. 마무리: 가장 어려웠던 선을 다시 걸으며 성취감을 나누고 칭찬합니다."""
    },
    84: {
        "title": "숨은 그림 찾기 놀이",
        "new_method": """놀이 방법 (7단계):
1. 준비: 숨은 그림 찾기 책이나 프린트를 펼쳐 평평한 곳에 놓습니다.
2. 시범: 보호자가 첫 번째 숨은 그림을 손가락으로 가리키며 찾아 봅니다.
3. 기본: 아이에게 다음 그림을 찾아보라고 하고 천천히 관찰하게 합니다.
4. 반복: 찾은 그림에 동그라미를 치거나 스티커를 붙이며 확인합니다.
5. 확장: 힌트를 주며 색, 모양, 위치 등의 단서를 제공해 탐색을 돕습니다.
6. 협응: 아이가 스스로 나머지 그림을 찾고 이름을 말하게 합니다.
7. 마무리: 찾은 그림 개수를 세어보고 다음 페이지로 넘어가며 격려합니다."""
    },
    85: {
        "title": "같은 소리로 시작하는 단어 찾기",
        "new_method": """놀이 방법 (7단계):
1. 준비: 그림 카드나 주변 물건을 모아 놓고 편안히 앉습니다.
2. 시범: 보호자가 "바나나, 바지, 바다" 등을 말하며 '바' 소리를 강조합니다.
3. 기본: 아이에게 '가'로 시작하는 단어를 생각해 보라고 물어봅니다.
4. 반복: 아이가 말한 단어의 첫소리를 다시 강조하며 칭찬합니다.
5. 확장: 여러 첫소리를 바꾸어 가며 다양한 단어를 탐색합니다.
6. 협응: 아이가 먼저 첫소리를 제시하고 보호자가 단어를 찾게 합니다.
7. 마무리: 오늘 찾은 단어들을 다시 복습하며 소리 인식을 강화합니다."""
    },
    86: {
        "title": "그림자 모양 맞추기",
        "new_method": """놀이 방법 (7단계):
1. 준비: 동물이나 사물 그림과 그림자 카드를 각각 준비해 놓습니다.
2. 시범: 보호자가 한 그림을 들고 그림자 카드 중 맞는 것을 찾아 맞춥니다.
3. 기본: 아이에게 그림 하나를 주고 그림자를 찾아보게 합니다.
4. 반복: 여러 그림과 그림자를 짝지으며 모양을 비교하고 확인합니다.
5. 확장: 실제 물건과 그림자를 비교하거나 조명으로 그림자를 만들어 봅니다.
6. 협응: 아이가 혼자 모든 그림과 그림자를 짝지어 보게 합니다.
7. 마무리: 완성된 짝을 함께 보며 모양 인식 능력을 칭찬하고 마무리합니다."""
    },
    87: {
        "title": "점토로 글자 모양 만들기",
        "new_method": """놀이 방법 (7단계):
1. 준비: 부드러운 점토와 글자 카드를 테이블 위에 준비합니다.
2. 시범: 보호자가 점토를 길게 늘려 'ㄱ' 모양을 만들며 보여줍니다.
3. 기본: 아이에게 점토를 주고 같은 글자를 따라 만들어 보게 합니다.
4. 반복: 다른 자음이나 간단한 모음을 점토로 만들며 연습합니다.
5. 확장: 만든 글자를 조합해 간단한 단어를 구성해 봅니다.
6. 협응: 아이가 스스로 글자를 선택하고 점토로 표현하게 합니다.
7. 마무리: 완성한 글자들을 사진으로 찍거나 전시하며 성취감을 나눕니다."""
    },
    88: {
        "title": "색깔별로 물건 분류하기",
        "new_method": """놀이 방법 (7단계):
1. 준비: 빨강, 파랑, 노랑 등 색깔별 바구니와 다양한 물건을 준비합니다.
2. 시범: 보호자가 빨간 블록을 빨간 바구니에 넣으며 색을 말합니다.
3. 기본: 아이에게 한 물건을 주고 어느 바구니에 넣을지 물어봅니다.
4. 반복: 여러 물건을 하나씩 집어 색깔에 맞게 분류하며 이름을 말합니다.
5. 확장: 분류가 끝나면 각 바구니의 물건 개수를 함께 세어 봅니다.
6. 협응: 아이가 혼자 남은 물건을 분류하고 색 이름을 말하게 합니다.
7. 마무리: 분류된 물건을 다시 섞어 놓고 정리하며 색 인식을 복습합니다."""
    },
    89: {
        "title": "간단한 미술 작품 따라 그리기",
        "new_method": """놀이 방법 (7단계):
1. 준비: 간단한 그림 샘플과 빈 종이, 크레용을 나란히 놓습니다.
2. 시범: 보호자가 샘플을 보며 한 부분을 천천히 그려 보여줍니다.
3. 기본: 아이에게 같은 부분을 따라 그려보게 하고 격려합니다.
4. 반복: 그림의 다른 부분을 하나씩 추가하며 단계별로 완성합니다.
5. 확장: 샘플과 다르게 색을 바꾸거나 추가 요소를 그려 넣게 합니다.
6. 협응: 아이가 샘플 없이 기억하며 비슷한 그림을 다시 그려 봅니다.
7. 마무리: 완성된 작품을 나란히 놓고 비교하며 칭찬하고 전시합니다."""
    },
    90: {
        "title": "이야기 듣고 그림으로 표현하기",
        "new_method": """놀이 방법 (7단계):
1. 준비: 짧은 이야기를 준비하고 빈 종이와 그리기 도구를 놓습니다.
2. 시범: 보호자가 이야기를 천천히 들려주며 주요 장면을 말합니다.
3. 기본: 아이에게 이야기 중 기억나는 장면을 그려보게 합니다.
4. 반복: 이야기를 다시 들려주며 빠진 부분을 추가로 그리게 합니다.
5. 확장: 그림에 대해 이야기하며 이야기 내용을 다시 말하게 합니다.
6. 협응: 아이가 그림을 보고 자신만의 이야기를 만들어 말하게 합니다.
7. 마무리: 그림과 이야기를 연결하며 이해력과 표현력을 칭찬합니다."""
    }
}

file_path = r"c:\Users\Administrator\OneDrive\Komensky TXT\PS_B_001-100_difficulty_v1.txt"

with open(file_path, 'r', encoding='utf-8') as f:
    content = f.read()

# Process each activity
for num, info in activities_to_restructure.items():
    title = info["title"]
    new_method = info["new_method"]
    
    # Pattern to find the play method section
    # Looking for "놀이 방법:" followed by numbered list until "놀이 난이도 조절:"
    pattern = r'(놀이 방법:)\s*\n((?:.*\n)*?)(놀이 난이도 조절:)'
    
    # Find the activity section
    activity_pattern = rf'Number {num}: {re.escape(title)}.*?(?=\nNumber \d+:|$)'
    activity_match = re.search(activity_pattern, content, re.DOTALL)
    
    if activity_match:
        activity_section = activity_match.group(0)
        method_match = re.search(pattern, activity_section, re.DOTALL)
        
        if method_match:
            # Replace the old method with new structured method
            old_method_section = method_match.group(0)
            new_method_section = f"놀이 방법 (7단계):\n{new_method.split('놀이 방법 (7단계):\n')[1]}\n놀이 난이도 조절:"
            
            # Replace in the full content
            content = content.replace(old_method_section, new_method_section)
            print(f"✓ Number {num}: {title} - 구조화 완료")
        else:
            print(f"✗ Number {num}: {title} - 놀이 방법 섹션을 찾을 수 없습니다")
    else:
        print(f"✗ Number {num}: {title} - 활동을 찾을 수 없습니다")

# Save the updated content
with open(file_path, 'w', encoding='utf-8') as f:
    f.write(content)

print("\n모든 놀이 방법 구조화가 완료되었습니다!")
